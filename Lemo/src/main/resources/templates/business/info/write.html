<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin-layout}">
<th:block layout:fragment="css-js">
    <link rel="stylesheet" th:href="@{/css/admin/adminSubStyle.css}">
    <link rel="stylesheet" th:href="@{/css/admin/adminCommon.css}">
    <!-- ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ ÌååÏùº ÏóÖÎ°úÎìú -->
    <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>
    <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">
    <!-- Îã§Ïùå Ï£ºÏÜå API -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=219050d1872ccb773b543fa419402493&libraries=services"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script th:src="@{/js/common/zipCode.js}"></script>
    <!-- summernote -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script th:src="@{/js/admin/summernote-ko-KR.js}"></script>
    <!-- include summernote css/js -->
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <!-- ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ -->
    <script th:src="@{/js/admin/dragNdrop.js}"></script>
    <!-- Ìï†Ïù∏Ïú® Ï†ÅÏö© -->
    <script th:src="@{/js/admin/salePercent.js}"></script>
    <style>
       #autoMaker{
           padding : 3px;
           position: absolute; width: 200px;
           height: auto; background: white;
           margin-top: 3px; cursor:pointer;
       }
       #autoMaker > div{
           border : 1px solid #e6e6e6;
           margin-top : 3px;
       }
       #autoMaker > div:hover{
           background : #e6d1ff;
       }

       ol, ul {
        margin-left: 10px;
       }
   </style>

</th:block>
<th:block layout:fragment="content">
    <main>
        <div class="main_inner">
            <!-- Ï£ÑÏ∏° ÏÇ¨Ïù¥ÎìúÎ∞î -->
            <th:block th:replace="~{fragments/_aside::businessFragment}"></th:block>
            <!-- Ïö∞Ï∏° Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
            <section class="main_content">
                <div class="main_cotent_inner">
                    <div class="main_content_div">
                        <div class="col_nav">
                            <span>ÏÉÅÌíàÍ¥ÄÎ¶¨ ></span>
                            <span>ÏàôÏÜåÎì±Î°ù</span>
                        </div>

                        <!-- ÏàôÏÜå Îì±Î°ù Ìèº -->
                        <form class="col_register_form" action="#">
                            <!-- ÏàôÏÜåÎ™Ö Îì±Î°ù -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>ÏàôÏÜåÎ™Ö</span>
                                    </div>
                                </div>
                                <input class="input_stayName" type="text" name="acc_name" placeholder="ÏàôÏÜåÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.">
                                <span class="result_stayName">
                                    üí° ÏàôÏÜåÎ™ÖÏùÄ Ï∂îÌõÑ ÏàòÏ†ïÍ∞ÄÎä•Ìï©ÎãàÎã§
                                </span>
                            </div>
                            <!-- ÏàôÏÜå ÌÉÄÏûÖ -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>ÏàôÏÜåÌÉÄÏûÖ</span>
                                    </div>
                                </div>
                                <div>
                                    <select name="accType_no">
                                        <option value="1">Î™®ÌÖî</option>
                                        <option value="2">Ìò∏ÌÖî</option>
                                        <option value="3">ÌéúÏÖò</option>
                                        <option value="4">Í≤åÏä§Ìä∏ÌïòÏö∞Ïä§</option>
                                        <option value="5">Ï∫†Ìïë¬∑Í∏ÄÎû®Ìïë</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Ï£ºÏÜåÎì±Î°ù -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>Ï£ºÏÜå</span>
                                    </div>
                                </div>
                                <div class="stayZip">
                                    <button type="button" onclick="postcode()">Ï£ºÏÜåÏ∞æÍ∏∞</button>
                                    <input type="text" id="zip" name="acc_zio" readonly>
                                </div>
                                <div class="stayAddr1">
                                    <input type="text" id="addr" name="acc_adder" readonly>
                                </div>
                                <div class="stayAddr2">
                                    <input type="text" id="addrDetail" name="acc_addrDetail" placeholder="ÏÉÅÏÑ∏Ï£ºÏÜå ÏûÖÎ†•">
                                </div>
                                <div id="map"></div>
                                <div>
                                    <input type="button" id="BtnButton" value="Î≤ÑÌäº">
                                </div>
                            </div>
                            <!-- Ï≤¥ÌÅ¨Ïù∏ Ï≤¥ÌÅ¨ÏïÑÏõÉ Í∏∞Î≥∏ ÏãúÍ∞Ñ -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>Í∏∞Î≥∏ Ï≤¥ÌÅ¨Ïù∏/Ï≤¥ÌÅ¨ÏïÑÏõÉ ÏãúÍ∞Ñ</span>
                                    </div>
                                </div>
                                <div>
                                    <span>Ï≤¥ÌÅ¨Ïù∏</span>
                                    <input type="time" name="acc_checkIn">
                                </div>
                                <div>
                                    <span>Ï≤¥ÌÅ¨ÏïÑÏõÉ</span>
                                    <input type="time" name="acc_checkOut">
                                </div>
                            </div>
                            <!-- Ìé∏ÏùòÏãúÏÑ§ Î∞è ÏÑúÎπÑÏä§ Ï≤¥ÌÅ¨Î∞ïÏä§ Îì±Î°ù -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>Ìé∏ÏùòÏãúÏÑ§ Î∞è ÏÑúÎπÑÏä§</span>
                                    </div>
                                </div>
                                <div class="cs_checkbox">
                                    <input type="text" id="insert_target" readonly>
                                    <input type="text" id="search_area" autocomplete="off">
                                    <div id="autoMaker"></div>
                                    <!--
                                    <table style="width: 100%;">
                                        <tr>
                                            <td>
                                                <label class="c_container">ÌîºÌä∏ÎãàÏä§
                                                    <input type="checkbox" checked="checked">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏôÄÏù¥ÌååÏù¥
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Î†àÏä§ÌÜ†Îûë
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">TV
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏóêÏñ¥Ïª®
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÎÉâÏû•Í≥†
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>

                                        </tr>

                                        <tr>
                                            <td>
                                                <label class="c_container">ÎìúÎùºÏù¥Í∏∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Ïû•Ïï†Ïù∏Ìé∏ÏùòÏãúÏÑ§
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Ï£ºÏ∞®Ïû•
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Î¨¥Î£åÏ£ºÏ∞®
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Í∏àÏó∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Ïπ¥Ìéò
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>

                                        </tr>

                                        <tr>
                                            <td>
                                                <label class="c_container">ÏàòÏòÅÏû•
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏöïÏ°∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Ïä§Ìåå
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏöïÏã§Ïö©Ìíà
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏÇ¨Ïö∞ÎÇò
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="c_container">ÏßêÎ≥¥Í¥Ä
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">ÏÑ∏ÌÉÅÍ∏∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <label class="c_container">Í±¥Ï°∞Í∏∞
                                                    <input type="checkbox">
                                                    <span class="checkmark"></span>
                                                </label>
                                            </td>
                                        </tr>
                                    </table>
                                    -->
                                </div>
                                <div id="tag_area" style="width: 100%; margin-top: 44px;">TAG</div>
                            </div>

                            <!-- ÏàôÏÜå Ïç∏ÎÑ§Ïùº Ïù¥ÎØ∏ÏßÄ -->
                            <div class="col_register1">
                                <div class="stayName" >
                                    <div>
                                        <span>ÏàôÏÜå Ïù¥ÎØ∏ÏßÄ</span>
                                    </div>
                                </div>
                                <div class="stayThumb" style="justify-content: center;">
                                    <div class="dropzone" id="fileDropzone">
                                        <div>
                                            <button class="dz-default dz-message" type="button">
                                                ÏÇ¨ÏßÑÏùÑ Ï≤®Î∂ÄÌïòÏãúÎ†§Î©¥ ÌÅ¥Î¶≠ÌïòÍ±∞ÎÇò ÎìúÎ°úÏö∞ Ïï§ ÎìúÎ°≠Ìï¥Ï£ºÏÑ∏Ïöî
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ÏàôÏÑú Ï†ïÎ≥¥ ÏûÖÎ†• -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>ÏàôÏÜå Ï†ïÎ≥¥</span>
                                    </div>
                                </div>
                                <div class="stayInfoContent">
                                    <textarea class="notice_text" id="summernote" name="acc_info">

                                    </textarea>
                                </div>
                            </div>

                            <!-- ÏÇ¨Ïû•Îãò ÌïúÎßàÎîî -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>ÏÇ¨Ïû•Îãò ÌïúÎßàÎîî</span>
                                    </div>
                                </div>
                                <input class="input_stayMention" type="text" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.">
                            </div>

                            <!-- Ìï†Ïù∏Ïú® Ï†ÅÏö© -->
                            <div class="col_register1">
                                <div class="stayName">
                                    <div>
                                        <span>Ìï†Ïù∏Ïú® Ï†ÅÏö©</span>
                                    </div>
                                </div>
                                <div class="salePercent_container">
                                    <table>
                                        <tr class="sp_tr1">
                                            <th>Î∂ÑÎ•ò</th>
                                            <th>Í∏∞Ï§ÄÍ∞Ä</th>
                                            <th>Ìï†Ïù∏Ïú®</th>
                                            <th>Ìï†Ïù∏Í∞Ä</th>
                                        </tr>
                                        <tr>
                                            <td>ÏÑ±ÏàòÍ∏∞ Ï£ºÏ§ë</td>
                                            <td>
                                                <input type="number" id="input1" placeholder="Í∏∞Ï§ÄÍ∞Ä ÏûÖÎ†•(Ïõê)">
                                            </td>
                                            <td>
                                                <input type="number" id="input2" placeholder="Ìï†Ïù∏Ïú® ÏûÖÎ†•(%)">
                                            </td>
                                            <td>
                                                <input type="number" id="result" readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ÏÑ±ÏàòÍ∏∞ Ï£ºÎßê</td>
                                            <td>
                                                <input type="number" id="input1" placeholder="Í∏∞Ï§ÄÍ∞Ä ÏûÖÎ†•(Ïõê)">
                                            </td>
                                            <td>
                                                <input type="number" id="input2" placeholder="Ìï†Ïù∏Ïú® ÏûÖÎ†•(%)">
                                            </td>
                                            <td>
                                                <input type="number" id="result" readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ÎπÑÏÑ±ÏàòÍ∏∞ Ï£ºÏ§ë</td>
                                            <td>
                                                <input type="number" id="input1" placeholder="Í∏∞Ï§ÄÍ∞Ä ÏûÖÎ†•(Ïõê)">
                                            </td>
                                            <td>
                                                <input type="number" id="input2" placeholder="Ìï†Ïù∏Ïú® ÏûÖÎ†•(%)">
                                            </td>
                                            <td>
                                                <input type="number" id="result" readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ÎπÑÏÑ±ÏàòÍ∏∞ Ï£ºÎßê</td>
                                            <td>
                                                <input type="number" id="input1" placeholder="Í∏∞Ï§ÄÍ∞Ä ÏûÖÎ†•(Ïõê)">
                                            </td>
                                            <td>
                                                <input type="number" id="input2" placeholder="Ìï†Ïù∏Ïú® ÏûÖÎ†•(%)">
                                            </td>
                                            <td>
                                                <input type="number" id="result" readonly>
                                            </td>
                                        </tr>
                                    </table>

                                </div>
                                <span class="result_stayName">
                                    üí° Ìï¥Îãπ Í∏∞Ï§ÄÍ∞ÄÏôÄ Ìï†Ïù∏Í∞ÄÎäî ÏòàÏãúÏùºÎøê Ïã§Ï†ú Ìï†Ïù∏Ïú® Í∞íÏù¥ Ï†ÅÏö©Îê©ÎãàÎã§
                                </span>
                            </div>


                            <div class="btnAdminProd" id="btnUpload">
                                <a href="#">
                                    ÏàôÏÜåÎì±Î°ù
                                </a>
                            </div>
                        </form>
                    </div>
                    <div class="blank30"></div>
                </div>
            </section>
        </div>
    </main>
    <th:block th:replace="~{fragments/_footer::footerFragment}"></th:block>
</th:block>
<th:block layout:fragment="script">


<script>
     $(document).ready(function() {
        $('#summernote').summernote({
            height: 450,
            focus: true,
            lang : 'ko-KR',
            spellCheck: false,
            toolbar: [
                // [groupName, [list of button]]
                ['style', ['bold', 'italic', 'underline', 'clear']],
                ['font', ['strikethrough']],
                ['fontsize', ['fontsize']],
                ['color', ['color']],
                ['table', ['table']],
                ['para', ['ul', 'ol', 'paragraph']]
            ]
        });
    });

    // Îã§Ïùå Ï£ºÏÜå API ÏûÖÎ†• Ï£ºÏÜå -> ÏúÑÎèÑ, Í≤ΩÎèÑ Î≥ÄÌôò
    const btnButton = document.getElementById("BtnButton");
    const addrInput = document.getElementById("addr");

    btnButton.addEventListener("click", function() {
        console.log(addrInput.value);
        // Ï£ºÏÜå-Ï¢åÌëú Î≥ÄÌôò Í∞ùÏ≤¥Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
        var geocoder = new kakao.maps.services.Geocoder();

       // Ï£ºÏÜåÎ°ú Ï¢åÌëúÎ•º Í≤ÄÏÉâÌï©ÎãàÎã§
        geocoder.addressSearch(addrInput.value, function(result, status) {

            // Ï†ïÏÉÅÏ†ÅÏúºÎ°ú Í≤ÄÏÉâÏù¥ ÏôÑÎ£åÎêêÏúºÎ©¥
             if (status === kakao.maps.services.Status.OK) {

                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                console.log("coords: " + coords);
                console.log(result[0].y);   // ÏúÑÎèÑ (acc_lattitude)
                console.log(result[0].x);   // Í≤ΩÎèÑ (acc_longtitude)

            }
        });


       });

    // Ìé∏ÏùòÏãúÏÑ§ ÏûêÎèôÏôÑÏÑ±

    const search_area = document.getElementById("search_area");
    let ref = [];
    let isComplete = false; // autoMaker ÏûêÏãùÏù¥ ÏÑ†ÌÉùÎêòÏóàÎäîÏßÄ Ïó¨Î∂Ä

    search_area.addEventListener("click", function(){

        ajaxAPI("business/info/findService", null, "GET").then((response)=>{
            console.log('response : %o', response);
            ref = response;
            console.log("ref:  %o", ref);

            for (let i = 0; i < response.length; i++) {
                console.log("sc_no : %d, sc_name : %s", response[i].sc_no, response[i].sc_name);
            }

            $('#search_area').keyup(function(e){
                keyUP();
            });
            $('#search_area').keydown(function(e){
                keyDOWN();
            });

        }).catch((errorMsg)=>{
            console.log(errorMsg);
        });


    });

    function keyUP(){
        let txt = $('#search_area').val();
        if(txt != ''){
            $('#autoMaker').children().remove();

            ref.forEach(function(arg){
                if(arg.sc_name.indexOf(txt) > -1 ){
                    $('#autoMaker').append(
                        $('<div>').text(arg.sc_name).attr({'sc_no':arg.sc_no})
                    );
                }
            });
            $('#autoMaker').children().each(function(){
                $(this).click(function(){
                    $('#search_area').val($(this).text());
                    $('#insert_target').val("sc_no : "+$(this).attr('sc_no')+ ", sc_name : " + $(this).text());

                    let temp = '<div name="sc_no" value="'+$(this).attr('sc_no')+'">#'+$(this).text()+'</div>';
                    $('#tag_area').append(temp);

                    $('#autoMaker').children().remove();
                    isComplete = true; // ÏûêÏãù ÏÑ†ÌÉù ÏôÑÎ£å
                });
            });

        }else {
            $('#autoMaker').children().remove();
        }
    }

    function keyDOWN(){
        if(isComplete) {  //autoMaker ÏûêÏãùÏù¥ ÏÑ†ÌÉù ÎêòÏóàÏúºÎ©¥ Ï¥àÍ∏∞Ìôî
            $('#insert_target').val('')
        }
    }






</script>
</th:block>
</html>