<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layouts/user-layout">
<th:block layout:fragment="css-js">
    <link rel="stylesheet" th:href="@{/css/user/user.css}">
</th:block>
<th:block layout:fragment="content">

    <main id="login">
        <section>
            <form th:action="@{/user/login}" method="post" id="loginForm">
                <div class="title">
                    <strong class="logo">
                        <img th:src="@{/images/index/lemo_logo-removebg-preview.png}" alt="">
                        <a th:href="@{/}">LEMO</a>
                    </strong>
                </div>
                <!-- 연동 로그인 -->
                <a th:href="@{/oauth2/authorization/kakao}" class="btn_start btn_kakao">
                        <span>
                            <img th:src="@{/images/user/icon_kakao.png}">
                            <i>카카오톡으로 로그인</i>
                        </span>
                </a>
                <a th:href="@{/oauth2/authorization/naver}" class="btn_start btn_naver">
                        <span>
                            <img th:src="@{/images/user/icon_naver.png}">
                            <i>네이버로 로그인</i>
                        </span>
                </a>
                <a th:href="@{/oauth2/authorization/google}" class="btn_start btn_google">
                        <span>
                            <img th:src="@{/images/user/icon_google.png}">
                            <i>구글으로 로그인</i>
                        </span>
                </a>
                <!-- 또는 -->
                <p class="or">
                    <span>또는</span>
                </p>
                <!-- 일반 로그인 -->
                <!-- 유효성 검사에 어긋나면 div에 inp_error 클래스를 추가, label의 display 속성을 none->block 으로 변경 -->
                <div class="inp_type1 ico_email form-errors">
                    <input type="email" name="username" placeholder="이메일 주소" required class="required" aria-invalid="true">
                    <label class="error">이메일 주소를 입력해주세요</label>
                </div>
                <div class="inp_type1 ico_pw form-errors">
                    <input type="password" name="password" placeholder="비밀번호" required class="required" aria-invalid="true">
                    <label class="error">비밀번호를 입력해주세요</label>
                </div>
                <button type="submit" class="login">
                    <span>로그인</span>
                </button>
                <div class="link_half">
                    <div>
                        <a href="#"><span>비밀번호 재설정</span></a>
                    </div>
                    <div>
                        <a th:href="@{/user/join}"><span>회원가입</span></a>
                    </div>
                </div>
            </form>
        </section>
    </main>

</th:block>
<th:block layout:fragment="script">
    <script>
       const error = "[[${error}]]"
       console.log(error);
       function getSwal(message){
            Swal.fire({
                title : message,
                icon : 'error',
                confirmButtonText : '확인'
            })
       }

       if(error != ""){
           if(error === "L")
               getSwal("차단된 회원입니다.\n고객센터로 문의해주세요.");

           else if(error === "W")
               getSwal("탈퇴한 회원입니다.\n24시간후에 재가입할 수 있습니다.");

           else if(error === "500")
               getSwal("로그인에 실패했습니다.\n잠시후에 다시 시도해주세요.");
       }
    </script>
</th:block>
</html>