<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin-layout}">
<th:block layout:fragment="css-js">
    <link rel="stylesheet" th:href="@{/css/admin/adminSubStyle.css}">
    <link rel="stylesheet" th:href="@{/css/admin/adminCommon.css}">
</th:block>
<th:block layout:fragment="content">
    <main>
        <div class="main_inner">
            <!-- 죄측 사이드바 -->
            <th:block th:replace="~{fragments/_aside::adminFragment}"></th:block>
            <!-- 우측 메인 컨테이너 -->
            <section class="main_content">
                <div class="main_cotent_inner">
                    <div class="main_content_div">
                        <!-- 관리자인 경우 출력-->
                        <div class="col0">
                            <form action="#">
                                <div class="searchProdNum">
                                    <input type="text" class="search_box" placeholder="숙소 번호 입력">
                                    <button type="submit" class="btnSearch">
                                        <input type="image" th:src="@{/images/admin/btn_search.png}">
                                    </button>
                                </div>
                                <div class="select_data">
                                    <input type="date">
                                </div>
                                <div class="guideMsg">관리자인 경우 출력(해당 문구 삭제 예정)</div>
                                <div class="guideTimelineColor">
                                    <table>
                                        <tr>
                                            <td>1</td>
                                            <td>결제완료</td>
                                            <td>3</td>
                                            <td>결제미완료</td>
                                            <td>5</td>
                                            <td>체크인</td>
                                            <td>7</td>
                                            <td>체크아웃</td>
                                        </tr>
                                    </table>
                                </div>
                            </form>
                        </div>

                        <!-- 판매자인 경우 출력-->
                        <div class="col0">
                            <form action="#">
                                <div class="selectProdForAdmin">
                                    <select>
                                        <option value="0">숙소명</option>
                                        <option value="1">푸른제주펜션</option>
                                        <option value="2">보우힐펜션</option>
                                        <option value="3">파라다이스호텔부산</option>
                                        <option value="4">프리지아펜션</option>
                                    </select>
                                </div>
                                <div class="select_data">
                                    <input type="date">
                                </div>
                                <div class="guideMsg">판매자인 경우 출력(해당 문구 삭제 예정)</div>
                                <div class="guideTimelineColor">
                                    <table>
                                        <tr>
                                            <td>1</td>
                                            <td>결제완료</td>
                                            <td>3</td>
                                            <td>결제미완료</td>
                                            <td>5</td>
                                            <td>체크인</td>
                                            <td>7</td>
                                            <td>체크아웃</td>
                                        </tr>
                                    </table>
                                </div>
                            </form>
                        </div>

                        <div class="col_nav">
                            <span>예약관리 ></span>
                            <span>타임라인</span>
                        </div>
                        <div class="col2">
                            <!-- 캘린더 -->
                            <div id="calendar-container">
                                <div id='calendar'></div>
                            </div>
                            <!-- 예약 상세 내역 보기 -->
                            <dialog id="d_Detail">
                                <form action="#" method="dialog">
                                    <section>
                                        <nav class="d_tit">
                                            <h1 class="d_tit2">예약상세정보</h1>
                                            <button value="close" type="reset" id="btnCloseModal">X</button>
                                        </nav>
                                        <nav class="d_sub_tit">
                                            <div class="d_b1">
                                                <span>예약번호:
                                                    <i>2303011856123456</i>
                                                </span>
                                                <span>&nbsp;&nbsp;예약일자:
                                                    <i>23.03.01</i>
                                                </span>
                                            </div>
                                        </nav>
                                        <div class="d_box">

                                            <div class="d_b2">
                                                숙소정보
                                            </div>
                                            <div class="d_b3">
                                                <div class="d_b3_1">
                                                    <div class="d_b3_2">
                                                        <div class="d_b_name">
                                                            <div>숙소정보</div>
                                                            <div>이비스 앰배서더 부산 해운대 [레이트버드-18시 체크인] 스탠다드 더블/1박</div>
                                                        </div>
                                                        <div class="d_b_name">
                                                            <div>체크인</div>
                                                            <div>2023.03.01 15:00</div>
                                                        </div>
                                                        <div class="d_b_name">
                                                            <div>체크아웃</div>
                                                            <div>2023.03.02 12:00</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="d_b2">
                                                예약자정보
                                            </div>
                                            <div class="d_b3">
                                                <div class="d_b3_1">
                                                    <div class="d_b3_2">
                                                        <div class="d_b_name">
                                                            <div>예약자명</div>
                                                            <div>이동글</div>
                                                        </div>
                                                        <div class="d_b_name">
                                                            <div>휴대폰번호</div>
                                                            <div>010-2023-0301</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="d_b2">
                                                결제정보
                                            </div>
                                            <div class="d_b3">
                                                <div class="d_b3_1">
                                                    <div class="d_b3_2">
                                                        <div class="d_b_name">
                                                            <div>결제방법</div>
                                                            <div>신용/체크카드</div>
                                                        </div>
                                                        <div class="d_b_name">
                                                            <div>예약번호</div>
                                                            <div>2303011931123456</div>
                                                        </div>
                                                        <div class="d_b_name2">
                                                            <div>최종결제금액 <i>(VAT포함)</i></div>
                                                            <div>52,800원</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </form>
                            </dialog>
                        </div>
                    </div>
                    <div class="blank30"></div>
                </div>
            </section>
        </div>
    </main>
    <th:block th:replace="~{fragments/_footer::footerFragment}"></th:block>
</th:block>
<th:block layout:fragment="script">
    <!-- fullcalendar  -->
    <link th:href='@{/css/admin/packages/core/main.css}' rel='stylesheet' />
    <link th:href='@{/css/admin/packages/daygrid/main.css}' rel='stylesheet' />
    <script th:src='@{/js/admin/packages/core/main.js}'></script>
    <script th:src='@{/js/admin/packages/interaction/main.js}'></script>
    <script th:src='@{/js/admin/packages/daygrid/main.js}'></script>
    <script>
        // ajax로 데이터 가져오기 https://fullcalendar.io/docs/events-json-feed
        document.addEventListener('DOMContentLoaded', function() {

            // 예약 상세 정보 팝업
            const d_Detail = document.getElementById('d_Detail');

            btnCloseModal.addEventListener("click", ()=>{
                d_Detail.close();
            });

            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                height: 800,
                plugins: [ 'interaction', 'dayGrid'],
                header: {
                    left: 'prev,next, today',
                    center: 'title',
                    right: 'dayGridMonth,dayGridWeek'
                },
                // defaultDate: '2023-03-15', 미지정 - 현재 날짜 출력
                navLinks: true,
                editable: false,
                fixedWeekCount:false,
                // eventLimit: true,
                locale: 'ko',
                eventAdd: function(obj) {
                    console.log(obj);
                },
                eventChange: function(obj) {
                    console.log(obj);
                },
                eventRemove: function(obj){
                    console.log(obj);
                },
                eventClick:function(event){
                    d_Detail.showModal();
                },
                events: [
                    {
                    groupId: 1,
                    title: '[101] 이동글',
                    start: '2023-03-01',
                    color: '#2B3467',
                    textColor: '#fff'
                    },
                    {
                    groupId: 2,
                    title: '[102] 김네모',
                    start: '2023-03-03',
                    end: '2023-03-05',
                    color: '#ff95a6'
                    },
                    {
                    groupId: 3,
                    title: '[103] 박세모',
                    start: '2023-03-06',
                    end: '2023-03-09',
                    color: '#BAD7E9',
                    textColor: '#252525'
                    },
                    {
                    groupId: 4,
                    title: '[104] 김녹차',
                    start: '2023-03-17',
                    end: '2023-03-18',
                    color: '#d7d7d7',
                    textColor: '#252525'
                    },
                    {
                    groupId: 5,
                    title: '[105] 송라떼',
                    start: '2023-03-12',
                    end: '2023-03-12',
                    color: '#d7d7d7',
                    textColor: '#252525'
                    },
                    {
                    groupId: 6,
                    title: '[106] 민코딩',
                    start: '2023-03-15',
                    end: '2023-03-15',
                    color: '#d7d7d7',
                    textColor: '#252525'
                    },
                    {
                    groupId: 7,
                    title: '[107] 홍길동',
                    start: '2023-03-11',
                    end: '2023-03-11',
                    color: '#d7d7d7',
                    textColor: '#252525'
                    }
                ]
            });

            calendar.render();
        });
    </script>
</th:block>
</html>