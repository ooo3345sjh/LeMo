<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin-layout}">
<th:block layout:fragment="css-js">
    <link rel="stylesheet" th:href="@{/css/admin/adminUser.css}">
    <link rel="stylesheet" th:href="@{/css/admin/adminCommon.css}">
</th:block>
<th:block layout:fragment="content">
    <main>
        <div class="main_inner">
            <!-- 죄측 사이드바 -->
            <th:block th:replace="~{fragments/_aside::adminFragment}"></th:block>
            <!-- 우측 메인 컨테이너 -->
            <section class="main_content">
                <div class="main_cotent_inner">
                    <div class="main_content_div">
                        <div class="col0">
                            <form th:action="@{/admin/user}">
                                <div class="selectProd">
                                    <select name="searchField">
                                        <option value="userId" th:selected="${ph.sc.searchField == 'userId'}">회원 아이디</option>
                                        <option value="userNick" th:selected="${ph.sc.searchField == 'userNick'}">회원 닉네임</option>
                                    </select>
                                </div>
                                <div class="searchProd">
                                    <input type="text" class="search_box" name="searchWord" placeholder="검색어를 입력하세요" th:value="${param.searchWord}"/>
                                    <button type="submit" class="btnSearch">
                                        <input type="image" th:src="@{/images/admin/btn_search.png}">
                                    </button>
                                </div>
                                <button type="button" class="download_list">
                                    엑셀 다운로드
                                </button>
                            </form>
                        </div>
                        <div class="col_nav">
                            <span>회원관리 ></span>
                            <span>회원목록</span>
                        </div>
                        <div class="col2">
                            <form th:action="@{/admin/user}">
                                <!-- 선택 -->
                                <div class="select_user_type">
                                    <table border="1">
                                        <tr>
                                            <th>상태</th>
                                            <td>
                                                <input type="radio" name="searchIsEnabled" value="1"><span>정상</span>
                                            </td>
                                            <td>
                                                <input type="radio" name="searchIsEnabled" value="0"><span>탈퇴</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>등급</th>
                                            <td>
                                                <input type="radio" name="searchLevel" value="1"><span>일반</span>
                                            </td>
                                            <td>
                                                <input type="radio" name="searchLevel" value="2"><span>엘리트</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>구분</th>
                                            <td>
                                                <input type="radio" name="searchType" value="1"><span>홈회원</span>
                                            </td>
                                            <td><input type="radio" name="searchType" value="2"><span>SNS회원</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="3"><input type="submit" value="검색"></td>
                                        </tr>
                                    </table>
                                </div>
                                <!-- 목록 -->
                                <div class="board_list">
                                    <ul>
                                        <li>번호</li>
                                        <li>회원 아이디</li>
                                        <li>닉네임</li>
                                        <li>상태</li>
                                        <li>등급</li>
                                        <li>구분</li>
                                        <li>가입일</li>
                                        <li>비고</li>
                                    </ul>
                                    <ul  th:each="user:${users}">
                                        <li>1</li>
                                        <li th:text="${user.user_id}">mango@gmail.com</li>
                                        <li th:text="${user.nick}">고민중인흰둥이</li>
                                        <li th:text="${user.isEnabled == 1} ? '정상':'탈퇴'">상태</li>
                                        <li th:text="${user.level == 1}? '일반':'엘리트'">등급</li>
                                        <li th:text="${user.type == 1}? '홈회원':'sns회원'">회원 구분</li>
                                        <li th:text="${user.rdate}">가입일</li>
                                        <li>
                                            <button class="btnNote">메모</button>
                                            <!-- 메모 팝업 -->
                                            <dialog id="d_Memo">
                                                <form method="dialog">
                                                    <section>
                                                        <nav class="d_tit">
                                                            <h1 class="d_tit2">메모</h1>
                                                        </nav>
                                                        <div class="d_box">
                                                            <textarea placeholder="메모 내용을 작성하세요"></textarea>
                                                        </div>
                                                        <div class="rr_btn">
                                                            <button class="btnRclose" id="btnCloseModal2" value="close" type="reset">닫기</button>
                                                            <button class="btnRsubmit" id="btnCloseModal3">작성</button>
                                                        </div>
                                                    </section>
                                                </form>
                                            </dialog>
                                            <button class="btnNote2" type="button">차단</button>
                                            <button class="btnNote2" type="button">삭제</button>
                                        </li>
                                    </ul>
                                </div>
                                <div class="pagination" th:object="${ph}" th:style="${#lists.size(users) == 0 ? 'visibility:hidden;':''}">

                                    <th:block th:if="*{showPrev}">
                                        <a th:href="@{/admin/user} + ${ph.sc.getQueryString(ph.beginPage-1)}" class="prev">< </a>
                                    </th:block>

                                    <th:block th:each="num:${#numbers.sequence(ph.beginPage, ph.endPage)}">
                                        <a th:href="@{/admin/user} + ${ph.sc.getQueryString(num)}" th:class="${num == ph.sc.page ? 'num current':'num'}">
                                            [[${num}]]
                                        </a>
                                    </th:block>

                                    <th:block th:if="*{showNext}">
                                        <a th:href="@{/admin/user} + ${ph.sc.getQueryString(ph.endPage+1)}" class="next"> ></a>
                                    </th:block>

                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="blank30"></div>
                </div>
            </section>
        </div>
    </main>
    <th:block th:replace="~{fragments/_footer::footerFragment}"></th:block>
</th:block>
<th:block layout:fragment="script">
    <script>
    $(document).ready(function(){
        // 메모 팝업
        $(document).on('click', '.btnNote', function(e){
            e.preventDefault();
            alert('here');
            $(this).next().show();
        });
        $('.btnRclose').click(function(e){
            e.preventDefault();
            alert('here2');
            $(this).closest('li').find('#d_Memo').hide();
        });
        // input 엔터키 submit 막기
        $('input[type="text"]').keydown(function() {
            if (event.keyCode === 13) {
                event.preventDefault();
            };
        });

    });
</script>
</th:block>
</html>