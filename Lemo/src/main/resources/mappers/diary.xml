<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    날짜 : 2023/03/14
    이름 : 박종협
    내용 : diary mapper
 -->
<mapper namespace="kr.co.Lemo.dao.DiaryDAO">

    <!-- select -->
    <select id="selectDiaryArticle" resultType="kr.co.Lemo.domain.DiarySpotVO">
        SELECT a.`arti_title`, b.* FROM `lemo_diary_article` AS a JOIN
        `lemo_diary_spot` AS b ON a.`arti_no` = b.`arti_no`;
    </select>

    <select id="selectDiarySpot" resultType="kr.co.Lemo.domain.DiarySpotVO">
        SELECT * FROM `lemo_diary_article` AS a JOIN
        `lemo_diary_spot` AS b ON a.`arti_no` = b.`arti_no` WHERE b.`arti_no` = #{arti_no};
    </select>
    
    <select id="selectDiaryComment" resultType="kr.co.Lemo.domain.DiaryCommentVO">
        SELECT `com_no`, `arti_no`, `user_id`, IFNULL(`com_pno`,`com_no`) AS `com_pno`, `com_comment`, `com_regip`, `com_rdate`, `com_udate`
        FROM `lemo_diary_comment` WHERE `arti_no`=#{arti_no};
    </select>

    <!--테스트용 사용중 아님 추후 삭제-->
    <resultMap id="DiarySpotVO" type="kr.co.Lemo.domain.DiarySpotVO">
        <result column="spot_no" property="spot_no"/>
        <result column="arti_no" property="arti_no"/>
        <result column="spot_longtitude" property="spot_longtitude"/>
        <result column="spot_lattitude" property="spot_lattitude"/>
        <result column="spot_title" property="spot_title"/>
        <result column="spot_content" property="spot_content"/>
        <result column="spot_thumb" property="spot_thumb"/>
        <result column="province_name" property="province_name"/>
        <result column="spot_addr" property="spot_addr"/>
    </resultMap>


    <!-- insert -->

    <!-- update -->

    <!-- delete -->

    <!-- 공통 키 -->

</mapper>