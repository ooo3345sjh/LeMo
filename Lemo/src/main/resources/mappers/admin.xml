<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    날짜 : 2023/03/08
    이름 : 이원정
    내용 : 관리자 mapper
 -->
<mapper namespace="kr.co.Lemo.dao.AdminDAO">

    <!-- select -->

    <!-- admin - user - list (user+business+admin) -->
    <select id="selectUser" parameterType="kr.co.Lemo.utils.SearchCondition" resultType="kr.co.Lemo.domain.UserVO">
        select * from `lemo_member_userinfo`
        <include refid="searchCondition"/>
        order by `rdate` desc limit #{offset}, 10;
    </select>
    <select id="countUser" parameterType="kr.co.Lemo.utils.SearchCondition" resultType="java.lang.Integer">
        select count(*) from `lemo_member_userinfo`;
    </select>

    <!-- insert -->

    <!-- update -->

    <!-- delete -->

    <!-- 공통 키 -->

    <!-- include :: sql 구문 재사용 -->
    <!-- admin - user - search condition::list -->
    <sql id="searchCondition">
        <if test="searchField != null">
            <choose>
                <when test='searchField == "userId"'>
                    where `user_id` like `%` + `#{searchWord}` + `%`
                </when>
                <when test='searchField == "userNick"'>
                    where `nick` like `%` + `#{searchWord}` + `%`
                </when>
                <when test='searchField == "userType"'>
                    where `type` like `%` + `#{searchWord}` + `%`
                </when>
                <when test='searchField == "userLevel"'>
                    where `level` like `%` + `#{searchWord}` + `%`
                </when>
                <when test='searchField == "userIsEnabled"'>
                    where `isEnabled` like `%` + `#{searchWord}` + `%`
                </when>
            </choose>
        </if>
    </sql>

</mapper>